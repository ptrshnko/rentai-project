# Laravel Web Application

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —á–∞—Ç–æ–≤ –≤ –∞—Ä–µ–Ω–¥–µ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- PHP 8.2+
- Composer
- PostgreSQL (–¥–ª—è –±—É–¥—É—â–∏—Ö —ç—Ç–∞–ø–æ–≤)

### –®–∞–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

#### Windows PowerShell

```powershell
# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –∫–∞—Ç–∞–ª–æ–≥
cd web

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
composer install

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ .env
copy .env.example .env

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
php artisan key:generate

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ .env (DB_* –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
# –ü–æ–∫–∞ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π Breeze (users, password_resets –∏ —Ç.–¥.)
php artisan migrate

# –ó–∞–ø—É—Å–∫ dev-—Å–µ—Ä–≤–µ—Ä–∞
php artisan serve --host=127.0.0.1 --port=9000
```

#### Linux/macOS/WSL

```bash
# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –∫–∞—Ç–∞–ª–æ–≥
cd web

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
composer install

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ .env
cp .env.example .env

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
php artisan key:generate

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ .env
# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π Breeze
php artisan migrate

# –ó–∞–ø—É—Å–∫ dev-—Å–µ—Ä–≤–µ—Ä–∞
php artisan serve --host=127.0.0.1 --port=9000
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –∏ —É–∫–∞–∂–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL:

```env
DB_CONNECTION=pgsql
DB_HOST=127.0.0.1
DB_PORT=5432
DB_DATABASE=rental_ai
DB_USERNAME=postgres
DB_PASSWORD=postgres
```

### AI Service

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ AI-—Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω –Ω–∞ `http://127.0.0.1:8000` (—Å–º. `ai/README.md`).

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `.env`:

```env
AI_BASE_URL=http://127.0.0.1:8000
AI_TIMEOUT=3
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

–û—Ç–∫—Ä–æ–π—Ç–µ http://127.0.0.1:9000/ - –≤—ã —É–≤–∏–¥–∏—Ç–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –∫–Ω–æ–ø–∫–æ–π "–í–æ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É".

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
2. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞
3. –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –≤—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ `/admin`

### –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

- **–î–∞—à–±–æ—Ä–¥** (`/admin`): –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–∞—Ä—Ç–æ—á–∫–æ–π —Å—Ç–∞—Ç—É—Å–∞ AI
- **–°—Ç–∞—Ç—É—Å AI** (`/admin/health`): –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ AI-—Å–µ—Ä–≤–∏—Å—É

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ AI

–ù–∞ –¥–∞—à–±–æ—Ä–¥–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞—Ä—Ç–æ—á–∫–∞ "–°—Ç–∞—Ç—É—Å AI":
- üü¢ **OK** - –µ—Å–ª–∏ AI-—Å–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ `/health`
- üî¥ **–û—à–∏–±–∫–∞** - –µ—Å–ª–∏ AI-—Å–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (—Å —Ç–µ–∫—Å—Ç–æ–º –æ—à–∏–±–∫–∏)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
web/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ Http/Controllers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Admin/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DashboardController.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ HealthController.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ HomeController.php
‚îÇ   ‚îî‚îÄ‚îÄ Services/
‚îÇ       ‚îî‚îÄ‚îÄ AiClient.php
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ ai.php
‚îú‚îÄ‚îÄ resources/views/
‚îÇ   ‚îú‚îÄ‚îÄ layouts/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.blade.php
‚îÇ   ‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.blade.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ health.blade.php
‚îÇ   ‚îî‚îÄ‚îÄ welcome.blade.php
‚îî‚îÄ‚îÄ routes/
    ‚îú‚îÄ‚îÄ web.php
    ‚îî‚îÄ‚îÄ admin.php
```

## –î–æ–º–µ–Ω–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–∏–¥—ã (–≠—Ç–∞–ø 4)

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–∏–¥—ã:

```bash
cd web

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
php artisan migrate

# –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–º–∏ (3-5 –∫–≤–∞—Ä—Ç–∏—Ä, —Ñ–æ—Ç–æ, —É–¥–æ–±—Å—Ç–≤–∞, –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)
php artisan db:seed
```

–ú–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞—é—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã:
- `properties` - –∫–≤–∞—Ä—Ç–∏—Ä—ã
- `property_photos` - —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∫–≤–∞—Ä—Ç–∏—Ä
- `amenities` - —É–¥–æ–±—Å—Ç–≤–∞
- `property_amenities` - —Å–≤—è–∑—å –∫–≤–∞—Ä—Ç–∏—Ä –∏ —É–¥–æ–±—Å—Ç–≤
- `bookings` - –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- `conversations` - –¥–∏–∞–ª–æ–≥–∏ (–¥–ª—è –±—É–¥—É—â–∏—Ö —ç—Ç–∞–ø–æ–≤)
- `messages` - —Å–æ–æ–±—â–µ–Ω–∏—è (–¥–ª—è –±—É–¥—É—â–∏—Ö —ç—Ç–∞–ø–æ–≤)
- `bot_failures` - –æ—à–∏–±–∫–∏ –±–æ—Ç–∞ (–¥–ª—è –±—É–¥—É—â–∏—Ö —ç—Ç–∞–ø–æ–≤)

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∏–¥–æ–≤ –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—ã –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:
- **–°–ø–∏—Å–æ–∫ –∫–≤–∞—Ä—Ç–∏—Ä** (`/admin/properties`): —Ç–∞–±–ª–∏—Ü–∞ —Å–æ –≤—Å–µ–º–∏ –∫–≤–∞—Ä—Ç–∏—Ä–∞–º–∏
- **–ö–∞—Ä—Ç–æ—á–∫–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã** (`/admin/properties/{id}`): –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, —Ñ–æ—Ç–æ, —É–¥–æ–±—Å—Ç–≤–∞, –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

## –°–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã

- **–≠—Ç–∞–ø 5**: Telegram-—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç (polling) —Å –∑–∞–ø–∏—Å—å—é –¥–∏–∞–ª–æ–≥–æ–≤
- **–≠—Ç–∞–ø 6**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AI `/infer` –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

## Troubleshooting

### AI —Å—Ç–∞—Ç—É—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ AI-—Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω: `cd ai && .\run.ps1` (Windows) –∏–ª–∏ `make run` (Linux)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `AI_BASE_URL` –≤ `.env`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 8000 –Ω–µ –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º

### –û—à–∏–±–∫–∏ –º–∏–≥—Ä–∞—Ü–∏–π

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—à–∏–±–∫–∏ –ø—Ä–∏ `php artisan migrate`:
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ `.env`
- –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤—Ä—É—á–Ω—É—é: `CREATE DATABASE rental_ai;`

